<?xml version="1.0" encoding="UTF-8"?>
<jasperReport name="Factura" language="java" pageWidth="595" pageHeight="842" columnWidth="555" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20" uuid="6c827361-9c3a-4e2a-8954-15998a4175ac">
	<property name="com.jaspersoft.studio.data.sql.tables" value=""/>
	<property name="com.jaspersoft.studio.data.defaultdataadapter" value="BDGestorFacturasEmpresa"/>
	<parameter name="P_FACTURA_ID" class="java.lang.Long"/>
	<parameter name="P_EMPRESA_ID" class="java.lang.Long"/>
	<parameter name="SUBREPORT_OBJECT" class="net.sf.jasperreports.engine.JasperReport"/>
	<query language="SQL"><![CDATA[SELECT
	f.id AS id,
	f.numero AS numero_factura,
	f.fecha_emision,
	f.concepto,
	f.base_imponible,
	f.iva_total,
	f.total_factura,
	f.estado,
	f.observaciones,
	e.nombre AS entidad_nombre,
	e.email AS entidad_email,
	d.direccion AS direccion
FROM
	factura f
JOIN
	entidad e ON f.entidad_id = e.id
LEFT JOIN
	direccion d ON f.entidad_id = d.entidad_id
WHERE
	f.id = $P{P_FACTURA_ID}
AND f.empresa_id = $P{P_EMPRESA_ID}
LIMIT 1]]></query>
	<field name="id" class="java.lang.Long"/>
	<field name="numero_factura" class="java.lang.String"/>
	<field name="fecha_emision" class="java.sql.Date"/>
	<field name="concepto" class="java.lang.String"/>
	<field name="base_imponible" class="java.math.BigDecimal"/>
	<field name="iva_total" class="java.math.BigDecimal"/>
	<field name="total_factura" class="java.math.BigDecimal"/>
	<field name="estado" class="java.lang.String"/>
	<field name="observaciones" class="java.lang.String"/>
	<field name="entidad_nombre" class="java.lang.String"/>
	<field name="entidad_email" class="java.lang.String"/>
	<field name="direccion" class="java.lang.String"/>
	<title height="100">
		<element kind="staticText" uuid="a1b2c3d4-e5f6-4890-a123-567890abcdef" x="0" y="0" width="200" height="30" fontSize="24.0" bold="true" vTextAlign="Middle">
			<text><![CDATA[FACTURA]]></text>
		</element>
		<element kind="staticText" uuid="1a2b3c4d-5e6f-7a8b-9c0d-1e2f3a4b5c6d" x="350" y="0" width="100" height="20" bold="true" hTextAlign="Right">
			<text><![CDATA[Nº Factura:]]></text>
		</element>
		<element kind="textField" uuid="2b3c4d5e-6f7a-8b9c-0d1e-2f3a4b5c6d7e" x="455" y="0" width="100" height="20" hTextAlign="Right">
			<expression><![CDATA[$F{numero_factura}]]></expression>
		</element>
		<element kind="staticText" uuid="3c4d5e6f-7a8b-9c0d-1e2f-3a4b5c6d7e8f" x="350" y="20" width="100" height="20" bold="true" hTextAlign="Right">
			<text><![CDATA[Fecha:]]></text>
		</element>
		<element kind="textField" pattern="dd/MM/yyyy" uuid="4d5e6f7a-8b9c-0d1e-2f3a-4b5c6d7e8f9a" x="455" y="20" width="100" height="20" hTextAlign="Right">
			<expression><![CDATA[$F{fecha_emision}]]></expression>
		</element>
		<element kind="textField" uuid="5e6f7a8b-9c0d-1e2f-3a4b-5c6d7e8f9a0b" mode="Opaque" backcolor="#EEEEEE" x="455" y="45" width="100" height="20" hTextAlign="Center" vTextAlign="Middle" bold="true">
			<expression><![CDATA[$F{estado}]]></expression>
		</element>
		<element kind="line" uuid="6f7a8b9c-0d1e-2f3a-4b5c-6d7e8f9a0b1c" x="0" y="80" width="555" height="1" forecolor="#CCCCCC"/>
	</title>
	<pageHeader height="100">
		<element kind="staticText" uuid="7a8b9c0d-1e2f-3a4b-5c6d-7e8f9a0b1c2d" x="0" y="10" width="150" height="15" forecolor="#666666" bold="true">
			<text><![CDATA[FACTURAR A:]]></text>
		</element>
		<element kind="textField" uuid="8b9c0d1e-2f3a-4b5c-6d7e-8f9a0b1c2d3e" x="0" y="30" width="350" height="20" fontSize="12.0" bold="true">
			<expression><![CDATA[$F{entidad_nombre}]]></expression>
		</element>
		<element kind="textField" uuid="9c0d1e2f-3a4b-5c6d-7e8f-9a0b1c2d3e4f" x="0" y="50" width="350" height="20">
			<expression><![CDATA[$F{direccion} != null ? $F{direccion} : ""]]></expression>
		</element>
		<element kind="textField" uuid="0d1e2f3a-4b5c-6d7e-8f9a-0b1c2d3e4f5a" x="0" y="70" width="350" height="20" forecolor="#333333">
			<expression><![CDATA[$F{entidad_email}]]></expression>
		</element>
	</pageHeader>
	<columnHeader height="50">
		<element kind="staticText" uuid="1e2f3a4b-5c6d-7e8f-9a0b-1c2d3e4f5a6b" x="0" y="0" width="100" height="15" fontSize="8.0" forecolor="#999999">
			<text><![CDATA[CONCEPTO / PROYECTO]]></text>
		</element>
		<element kind="textField" uuid="2f3a4b5c-6d7e-8f9a-0b1c-2d3e4f5a6b7c" mode="Opaque" backcolor="#F8F9FA" x="0" y="15" width="555" height="30" vTextAlign="Middle">
			<paragraph leftIndent="5"/>
			<expression><![CDATA[$F{concepto}]]></expression>
		</element>
	</columnHeader>
	<detail>
		<band height="100">
			<element kind="staticText" uuid="3a4b5c6d-7e8f-9a0b-1c2d-3e4f5a6b7c8d" x="0" y="5" width="200" height="15" bold="true">
				<text><![CDATA[Detalle de líneas:]]></text>
			</element>
			<element kind="subreport" uuid="4b5c6d7e-8f9a-0b1c-2d3e-4f5a6b7c8d9e" x="0" y="25" width="555" height="70">
				<connectionExpression><![CDATA[$P{REPORT_CONNECTION}]]></connectionExpression>
				<expression><![CDATA[$P{SUBREPORT_OBJECT}]]></expression>
				<parameter name="P_FACTURA_ID_SUB">
					<expression><![CDATA[$F{id}]]></expression>
				</parameter>
			</element>
		</band>
	</detail>
	<columnFooter height="130">
		<element kind="line" uuid="5c6d7e8f-9a0b-1c2d-3e4f-5a6b7c8d9e0f" x="0" y="5" width="555" height="1"/>
		<element kind="staticText" uuid="6d7e8f9a-0b1c-2d3e-4f5a-6b7c8d9e0f1a" x="0" y="15" width="200" height="15" bold="true">
			<text><![CDATA[Observaciones:]]></text>
		</element>
		<element kind="textField" uuid="7e8f9a0b-1c2d-3e4f-5a6b-7c8d9e0f1a2b" x="0" y="30" width="260" height="80" fontSize="9.0" forecolor="#555555">
			<expression><![CDATA[$F{observaciones}]]></expression>
		</element>
		<element kind="staticText" uuid="8f9a0b1c-2d3e-4f5a-6b7c-8d9e0f1a2b3c" x="300" y="15" width="100" height="20" hTextAlign="Right">
			<text><![CDATA[Base Imponible:]]></text>
		</element>
		<element kind="textField" pattern="#,##0.00 ¤" uuid="9a0b1c2d-3e4f-5a6b-7c8d-9e0f1a2b3c4d" x="410" y="15" width="145" height="20" hTextAlign="Right">
			<expression><![CDATA[$F{base_imponible}]]></expression>
		</element>
		<element kind="staticText" uuid="0b1c2d3e-4f5a-6b7c-8d9e-0f1a2b3c4d5e" x="300" y="35" width="100" height="20" hTextAlign="Right">
			<text><![CDATA[IVA Total:]]></text>
		</element>
		<element kind="textField" pattern="#,##0.00 ¤" uuid="1c2d3e4f-5a6b-7c8d-9e0f-1a2b3c4d5e6f" x="410" y="35" width="145" height="20" hTextAlign="Right">
			<expression><![CDATA[$F{iva_total}]]></expression>
		</element>
		<element kind="line" uuid="2d3e4f5a-6b7c-8d9e-0f1a-2b3c4d5e6f7a" x="300" y="60" width="255" height="1"/>
		<element kind="staticText" uuid="3e4f5a6b-7c8d-9e0f-1a2b-3c4d5e6f7a8b" x="300" y="70" width="100" height="30" fontSize="14.0" bold="true" hTextAlign="Right" vTextAlign="Middle">
			<text><![CDATA[TOTAL:]]></text>
		</element>
		<element kind="textField" pattern="#,##0.00 ¤" uuid="4f5a6b7c-8d9e-0f1a-2b3c-4d5e6f7a8b9c" mode="Opaque" backcolor="#F0F0F0" x="410" y="70" width="145" height="30" fontSize="14.0" bold="true" hTextAlign="Right" vTextAlign="Middle">
			<expression><![CDATA[$F{total_factura}]]></expression>
		</element>
	</columnFooter>
</jasperReport>